utils=angular.module("utils",[]),utils.filter("capitalize",function(){return function(t){return t?t.charAt(0).toUpperCase()+t.toLowerCase().slice(1):void 0}}),utils.filter("sortBy",function(t){return function(e,n,i){return e?n&&""!==n?t("orderBy")(e,n,i):e:void 0}}),utils.directive("selectOnFocus",["$window",function(t){return{restrict:"A",link:function(e,n,i){n.on("focus",function(){t.getSelection().toString()||this.setSelectionRange(0,this.value.length)})}}}]),utils.directive("currencyInput",function(){return{restrict:"A",scope:{field:"=ngModel","class":"@"},replace:!1,link:function(t,e,n){var i=function(){for(var n=e.val();"0"==n.charAt(0);)n=n.substr(1);n=n.replace(/[^\d.\',']/g,"");var i=n.indexOf(".");i>=0&&(n=n.slice(0,i+3));var r=n.split("."),o=r[0],c=r[1];if(o=o.replace(/[^\d]/g,""),o.length>3)for(var l=Math.floor(o.length/3);l>0;){var a=o.indexOf(",");0>a&&(a=o.length),a-3>0&&(o=o.slice(0,a-3)+","+o.slice(a-3)),l--}c=void 0===c?"":"."+c;var s=o+c;e.val(s);var u=s.replace(",","");t.$apply(function(){t.field=u}),t.$apply(function(){t.field=u})};$(e).bind("keyup",function(t){i()})}}}),utils.directive("decimalInput",function(){return{restrict:"A",scope:{field:"=ngModel",decimalSize:"=decimalInput","class":"@"},replace:!1,link:function(t,e,n){var i=function(){for(var n=e.val();"0"==n.charAt(0);)n=n.substr(1);n=n.replace(/[^\d.\',']/g,"");var i=n.indexOf(".");i>=0&&(n=n.slice(0,i+(t.decimalSize?t.decimalSize+1:n.length-i)));var r=n.split("."),o=r[0],c=r[1];if(o=o.replace(/[^\d]/g,""),o.length>3)for(var l=Math.floor(o.length/3);l>0;){var a=o.indexOf(",");0>a&&(a=o.length),a-3>0&&(o=o.slice(0,a-3)+","+o.slice(a-3)),l--}c=void 0===c?"":"."+c;var s=o+c;e.val(s);var u=s.replace(",","");t.$apply(function(){t.field=u}),t.$apply(function(){t.field=u})};$(e).bind("keyup",function(t){i()})}}}),utils.directive("autoFocus",function(t){return{restrict:"A",scope:{},replace:!1,link:function(e,n,i){$(n).focus(),t(function(){$(n).select()},300)}}}),utils.factory("utils",function(){return new function(){var t=this;this.cloneObj=function(e,n){if(e instanceof Array)var i=[];else var i={};for(var r in e)i[r]=e[r],n&&i[r]instanceof Object&&(i[r]=t.cloneObj(i[r],n));return i},this.copyProperties=function(t,e){for(var n in t)e[n]=t[n]}}}),utils.directive("scrollTop",["$window",function(t){return{restrict:"A",link:function(t,e,n){e.on("click",function(){$("body,html").animate({scrollTop:0},600)})}}}]),utils.directive("scrollBottom",["$window",function(t){return{restrict:"A",link:function(t,e,n){e.on("click",function(){$("body,html").animate({scrollTop:$(document).height()},600)})}}}]),utils.directive("rollTopButton",["$window",function(t){return{restrict:"A",link:function(t,e,n){e.fadeOut(),$(window).scroll(function(){$(this).scrollTop()>300?e.fadeIn():e.fadeOut()}),e.on("click",function(){$("body,html").animate({scrollTop:0},600)})}}}]),utils.directive("scrollDownFixed",["$window",function(t){return{restrict:"A",link:function(t,e,n){var i=$("scrollDownFixedStyleAdded");(!i||i.length<!0)&&($("body").append('<input type="hidden" id="scrollDownFixedStyleAdded">'),$("head").append("<style>md-tabs.md-tab-fixed-top > md-tabs-wrapper{top: 0;position: fixed;right: 0;z-index: 1030;left: 0;}</style>")),e.removeClass("md-tab-fixed-top"),$(window).scroll(function(){t.scrolltop||(t.scrolltop=e.position().top+e.offset().top),$(this).scrollTop()>t.scrolltop?e.addClass("md-tab-fixed-top"):e.removeClass("md-tab-fixed-top")})}}}]),utils.factory("dateUtils",function(){return new function(){var t=this;this.toBrStr=function(t,e){e||(e="/");var n=""+(t.getMonth()+1),i=((""+t.getDate()).length>1?t.getDate():"0"+t.getDate())+e+(n.length>1?n:"0"+n)+e+t.getFullYear();return i},this.truncateDate=function(t){var e=new Date(t);return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e},this.compareDate=function(e,n){var i=t.truncateDate(e),r=t.truncateDate(n);return i.getTime()-r.getTime()},this.compareDateTime=function(t,e){return t.getTime()-e.getTime()},this.isSameDay=function(e,n){return 0==t.compareDate(e,n)},this.isToday=function(e){return t.isSameDay(e,new Date)},this.isPastDay=function(e){return t.compareDate(e,new Date)<0},this.isFutureDay=function(e){return t.compareDate(e,new Date)>0}}});