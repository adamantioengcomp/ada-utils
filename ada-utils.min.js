utils=angular.module("utils",[]),utils.filter("capitalize",function(){return function(t){return t?t.charAt(0).toUpperCase()+t.toLowerCase().slice(1):void 0}}),utils.filter("sortBy",["$filter",function(t){return function(e,i,n){return e?i&&""!==i?t("orderBy")(e,i,n):e:void 0}}]),utils.directive("selectOnFocus",["$window",function(t){return{restrict:"A",link:function(e,i,n){i.on("focus",function(){t.getSelection().toString()||this.setSelectionRange(0,this.value.length)})}}}]),utils.directive("currencyInput",function(){return{restrict:"A",scope:{field:"=ngModel","class":"@"},replace:!1,link:function(t,e,i){var n=function(){for(var i=e.val();"0"==i.charAt(0);)i=i.substr(1);i=i.replace(/[^\d.\',']/g,"");var n=i.indexOf(".");n>=0&&(i=i.slice(0,n+3));var r=i.split("."),o=r[0],l=r[1];if(o=o.replace(/[^\d]/g,""),o.length>3)for(var c=Math.floor(o.length/3);c>0;){var s=o.indexOf(",");0>s&&(s=o.length),s-3>0&&(o=o.slice(0,s-3)+","+o.slice(s-3)),c--}l=void 0===l?"":"."+l;var a=o+l;e.val(a);var u=a.replace(",","");t.$apply(function(){t.field=u}),t.$apply(function(){t.field=u})};$(e).bind("keyup",function(t){n()})}}}),utils.directive("decimalInput",function(){return{restrict:"A",scope:{field:"=ngModel",decimalSize:"=decimalInput","class":"@"},replace:!1,link:function(t,e,i){var n=function(){for(var i=e.val();"0"==i.charAt(0);)i=i.substr(1);i=i.replace(/[^\d.\',']/g,"");var n=i.indexOf(".");n>=0&&(i=i.slice(0,n+(t.decimalSize?t.decimalSize+1:i.length-n)));var r=i.split("."),o=r[0],l=r[1];if(o=o.replace(/[^\d]/g,""),o.length>3)for(var c=Math.floor(o.length/3);c>0;){var s=o.indexOf(",");0>s&&(s=o.length),s-3>0&&(o=o.slice(0,s-3)+","+o.slice(s-3)),c--}l=void 0===l?"":"."+l;var a=o+l;e.val(a);var u=a.replace(",","");t.$apply(function(){t.field=u}),t.$apply(function(){t.field=u})};$(e).bind("keyup",function(t){n()})}}}),utils.directive("autoFocus",["$timeout",function(t){return{restrict:"A",scope:{},replace:!1,link:function(e,i,n){$(i).focus(),t(function(){$(i).select()},300)}}}]),utils.factory("utils",function(){return new function(){var t=this;this.cloneObj=function(e,i){if(e instanceof Array)var n=[];else var n={};for(var r in e)n[r]=e[r],i&&n[r]instanceof Object&&(n[r]=t.cloneObj(n[r],i));return n},this.copyProperties=function(t,e){for(var i in t)e[i]=t[i]}}}),utils.directive("scrollTop",["$window",function(t){return{restrict:"A",link:function(t,e,i){var n=i.scrollTime?i.scrollTime:600;e.on("click",function(){$("body,html").animate({scrollTop:0},n)})}}}]),utils.directive("scrollBottom",["$window",function(t){return{restrict:"A",link:function(t,e,i){var n=i.scrollTime?i.scrollTime:600;e.on("click",function(){$("body,html").animate({scrollTop:$(document).height()},n)})}}}]),utils.directive("scrollTo",["$window",function(t){return{restrict:"A",link:function(t,e,i){e.on("click",function(){var t=$(i.scrollTo),e=i.scrollToOffset?Number(i.scrollToOffset):0,n=i.scrollTime?i.scrollTime:600;$("body,html").animate({scrollTop:t.offset().top+e},n)})}}}]),utils.directive("rollTopButton",["$window",function(t){return{restrict:"A",link:function(t,e,i){e.fadeOut(),$(window).scroll(function(){$(this).scrollTop()>300?e.fadeIn():e.fadeOut()}),e.on("click",function(){$("body,html").animate({scrollTop:0},600)})}}}]),utils.directive("scrollDownFixed",["$window",function(t){return{restrict:"A",link:function(t,e,i){var n=$("scrollDownFixedStyleAdded");(!n||n.length<!0)&&($("body").append('<input type="hidden" id="scrollDownFixedStyleAdded">'),$("head").append("<style>md-tabs.md-tab-fixed-top > md-tabs-wrapper{top: 0;position: fixed;right: 0;z-index: 1030;left: 0;}</style>")),e.removeClass("md-tab-fixed-top"),$(window).scroll(function(){t.scrolltop||(t.scrolltop=e.position().top+e.offset().top),$(this).scrollTop()>t.scrolltop?e.addClass("md-tab-fixed-top"):e.removeClass("md-tab-fixed-top")})}}}]),utils.factory("dateUtils",function(){return new function(){var t=this;this.toBrStr=function(t,e){e||(e="/");var i=""+(t.getMonth()+1),n=((""+t.getDate()).length>1?t.getDate():"0"+t.getDate())+e+(i.length>1?i:"0"+i)+e+t.getFullYear();return n},this.truncateDate=function(t){var e=new Date(t);return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e},this.compareDate=function(e,i){var n=t.truncateDate(e),r=t.truncateDate(i);return n.getTime()-r.getTime()},this.compareDateTime=function(t,e){return t.getTime()-e.getTime()},this.isSameDay=function(e,i){return 0==t.compareDate(e,i)},this.isToday=function(e){return t.isSameDay(e,new Date)},this.isPastDay=function(e){return t.compareDate(e,new Date)<0},this.isFutureDay=function(e){return t.compareDate(e,new Date)>0}}});